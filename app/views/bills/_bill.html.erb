<% if bill.date %>
<h4><%= bill.description %></h4>
<div id="bill_amount"><%= bill.amount %></div>
<!-- get the date picker for date -->
<div id="date_format"></div> 
  
  <% List.find(bill.list_id).users.each do |user| %>

    <% if user.id == bill.user_id %>
      <% if user == current_user %>
      You Paid: <%= bill.amount %>
      <% else %>
      <%= user.name %> Paid: <%= bill.amount %>
      <% end %>
    <% else %>
      <% if user == current_user %>
        You lent: <%= (bill.amount / List.find(bill.list_id).users.count) * (List.find(bill.list_id).users.count - 1) %>
      <% else %>
        <%= User.find(bill.user_id).name %> lent you: <%= bill.amount / List.find(bill.list_id).users.count %>
      <% end %>
    <% end %>
    <% end %>

  	<table>
  		<thead>
  			<tr>
  				<th colspan="6"><%= @list.name %></th>
  			</tr>
  			<tr>
  				<th>date</th>
  				<th>description</th>
  				<th>total</th>
  				<th>paid on</th>
  				<th>paid by</th>
  				<th>your share</th>
  			</tr>
  		</thead>
  		<tbody>
  			<% List.find(bill.list_id).users.each do |user| %>
  			<tr>
  				  <td><%= bill.date.strftime("%m-%d-%Y") %></td>
            <td><%=bill.description%></td>
            <td><%=bill.amount%></td>
            <td><%=bill.date_paid%></td>
            <td><%=responsibility_for(bill)%></td>
            <td><%=bill.shared_amount%></td>
  			</tr>
  			<% end %>
  		</tbody>
  	</table>

<!-- needs remote true-->
<!-- needs error handling -->
<li><%= link_to "edit", edit_list_bill_path(bill.list, bill), {method: :get} %></li>
<!-- needs remote true-->
<!-- needs error handling -->
<li><%= link_to "delete", list_bill_path(bill.list, bill), confirm: 'Are you sure you want to delete this bill?', method: :delete %></li>

<% end %>