<% if bill.date %>
<div id="bill_amount"><%= bill.amount %></div>
<!-- get the date picker for date -->
<div id="date_format"></div> 
  	<table>
  		<thead>
  			<tr>
  				<th colspan="8"><%= @list.name %></th>
  			</tr>
  			<tr>
  				<th>date</th>
  				<th>description</th>
  				<th>total</th>
  				<th>paid on</th>
  				<th>paid by</th>
  				<th>your share</th>
  			</tr>
  		</thead>
  		<tbody>
  			<tr>
  			<% List.find(bill.list_id).users.each do |user| %>
  				  <td><%= bill.date.strftime("%m-%d-%Y") %></td>
            <td><%=bill.description%></td>
            <td><%=bill.amount%></td>
            <td><%=bill.date_paid%></td>
            <td>
            	<% if user.id == bill.user_id %>
            		<% if user == current_user %>
            			You Paid: <%= bill.amount %>
            		<% else %>
            			<% user.name %> Paid: <%= bill.amount %>
            		<% end %>
            	<% else %>
            		<% if user == current_user %>
            			You lent: <%= (bill.amount / List.find(bill.list_id).users.count) * (List.find(bill.list_id).users.count - 1) %>
            		<% else %>
            		        <%= User.find(bill.user_id).name %> lent you: <%= bill.amount / List.find(bill.list_id).users.count %>
            		<% end %>	
            	<% end %>
            </td>
            <td><%=bill.shared_amount%></td>
            <td><li><%= link_to "edit", edit_list_bill_path(bill.list, bill), {method: :get} %></li></td>
            <td><li><%= link_to "delete", list_bill_path(bill.list, bill), confirm: 'Are you sure you want to delete this bill?', method: :delete %></li></td>
  				<% end %>
  			</tr>
  		</tbody>
  	</table>

<!-- needs remote true-->
<!-- needs error handling -->
<!-- needs remote true-->
<!-- needs error handling -->

<% end %>